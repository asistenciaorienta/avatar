<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Live2D funcionando</title>
  <style>
    body { margin: 0; background: #ffffff; overflow: hidden; }
    canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; }
  </style>
</head>
<body>
  <!-- PIXI.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/5.3.12/pixi.min.js"></script>
  <!-- Live2D Cubism Core -->
  <script src="libs/Core/live2dcubismcore.min.js"></script>
  <!-- pixi-live2d-display con soporte Cubism 4 -->
  <script src="https://cdn.jsdelivr.net/npm/pixi-live2d-display@0.4.0/dist/cubism4.min.js"></script>
  <!-- <script src="https://cdn.jsdelivr.net/npm/pixi-live2d-display/dist/cubism4.min.js"></script> -->

<!-- Live2D Cubism Core 
<script src="https://cdn.jsdelivr.net/npm/live2dcubismcore@1.0.2/dist/live2dcubismcore.min.js"></script>-->

<!-- Pixi.js (opcional, si deseas usarlo para renderizado) 
<script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/5.3.12/pixi.min.js"></script>-->

  
  <script> 
    const app = new PIXI.Application({
      view: document.createElement("canvas"),
      autoStart: true,
      resizeTo: window,
      backgroundAlpha: 0
    });
    document.body.appendChild(app.view);

    PIXI.live2d.Live2DModel.from("modelo290825_2/modelo290825_2.model3.json").then(model => {
      model.scale.set(0.25);
      model.x = (window.innerWidth - model.width * model.scale.x) / 2;
      model.y = (window.innerHeight - model.height * model.scale.y) / 2;
      app.stage.addChild(model);

      // 游 Forzar par치metros en cada frame
      app.ticker.add(() => {
        model.internalModel.coreModel.setParameterValueById("ParametroMouthOpen", 0.0);
        model.internalModel.coreModel.setParameterValueById("ParametroMouthSpeak", -1.0);
        model.internalModel.coreModel.setParameterValueById("ParametroAtencion", -30.0);
        model.internalModel.coreModel.setParameterValueById("Parametromoverpierna", -30.0);
        const t = (Date.now() % 1000) / 1000; // ciclo 1 segundo
        const eyeOpen = t < 0.9 ? 0 : 1;      // parpadeo r치pido 0.1s cerrado
        model.internalModel.coreModel.setParameterValueById("ParametroParpadeo", eyeOpen);
      });

const modelPath = "modelo290825_2/modelo290825_2.model3.json";
const motionPath = "modelo290825_2/hablar.motion3.json";

// Cargar el modelo
fetch(modelPath)
  .then(res => res.json())
  .then(modelData => {
    const model = new Live2DCubismCore.CubismModel(modelData);
    model.scale.set(0.25);
    model.x = (window.innerWidth - model.width * model.scale.x) / 2;
    model.y = (window.innerHeight - model.height * model.scale.y) / 2;
    app.stage.addChild(model);

    // Hacer el modelo interactivo
    model.interactive = true;
    model.buttonMode = true;

    // Cargar la animaci칩n
    fetch(motionPath)
      .then(res => res.arrayBuffer())
      .then(buffer => {
        const motion = model.internalModel.motionManager.createMotion(buffer);
        if (!motion) throw new Error("Motion no v치lido");

        // Iniciar la animaci칩n al hacer clic
        model.on("pointerdown", () => {
          model.internalModel.motionManager.startMotion(motion, false);
        });
      })
      .catch(err => {
        console.error("Error cargando animaci칩n:", err);
      });
    }).catch(err => {
      console.error("Error cargando modelo:", err);
    });
  </script>
</body>
</html>






























